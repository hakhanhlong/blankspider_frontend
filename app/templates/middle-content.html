{% extends "listing.html"%}
{% from "_macros.html" import pagination_ajax with context%}
{% from "_macros.html" import pagination_ajax_content_default with context%}
{% from "_macros.html" import pagination_ajax_search_content with context%}
{% block midlecontent %}
<div class="midle-content">
    <table id="data_table" class="table table-striped table-bordered">
        <thead>
        <tr style="background: #7d7d7d; font-family: 'Segoe UI';color: #333333;font-size: 14px;font-weight: 700;">
            <th>#</th>
            <th>TIÊU ĐỀ</th>
            <th>CHUYÊN MỤC</th>
            <th>THỜI GIAN</th>
            <th>PHIÊN BẢN</th>
        </tr>
        </thead>
        <tbody>
        {%for item in contents%}
        <tr>
            <td>{{loop.index}}</td>
            <td>
                {%if params.pageid|int == 0%}
                <a href="{{url_for('repository.detail', cid=item.id, page=pagination.page, prepageid=0, sid=item.source_id, tagname=item['tag_name'])}}">
                    {{item['title']}}</a>
                {%elif params.pageid|int == 1%}
                <a href="{{url_for('repository.detail', cid=item.id, page=pagination.page,prepageid=1, sid=item.source_id, ptimingid=params.ptimingid, tagname=item['tag_name'])}}">
                    {{item['title']}}</a>
                {%elif params.pageid|int == 3%}
                <a data-date-format="dd/mm/yyyy"
                   href="{{url_for('repository.search_to_detail', cid=item.id, source=params.source,tag=params.tag,published=params.published,kw=params.kw,page=pagination.page, sid=item.source_id, tagname=item['tag_name'])}}">
                    {{item['title']}}</a>
                {%endif%}
            </td>
            <td>{{item['tag_name']}}</td>
            <td>{{item['published_time']}}</td>
            <td>{{item['version_count']}}</td>
        </tr>
        {%endfor%}
    </table>
    <div id="tong-so"> Tổng số: <label style="color: red;">{{pagination.total_count-1}}</label></div>
    {%if params%}
    {%if params.pageid == 1%}
    {{ pagination_ajax(pagination, sid=params.sid, timingid=params.ptimingid) }}
    {%endif%}
    {%if params.pageid == 0%}
    {{ pagination_ajax_content_default(pagination) }}
    {%endif%}
    {%if params.pageid == 3%}
    {{pagination_ajax_search_content(pagination)}}
    {%endif%}
    {%endif%}
</div>
{%endblock%}
